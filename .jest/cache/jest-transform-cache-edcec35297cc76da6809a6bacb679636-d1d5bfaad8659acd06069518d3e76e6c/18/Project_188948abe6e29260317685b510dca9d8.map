{"version":3,"sources":["../src/Project.ts"],"names":["exp","packageJsonPath","resolveFrom","expoPackageJson","json5","version","packageVersion","majorVersion","ConfigError"],"mappings":";;;;;;;AAAA,SAAA,SAAA,GAAA;AAAA,MAAA,IAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;;AAAA,EAAA,SAAA,GAAA,qBAAA;AAAA,WAAA,IAAA;AAAA,GAAA;;AAAA,SAAA,IAAA;AAAA;;AACA,SAAA,YAAA,GAAA;AAAA,MAAA,IAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,cAAA,CAAA,CAAA;;AAAA,EAAA,YAAA,GAAA,wBAAA;AAAA,WAAA,IAAA;AAAA,GAAA;;AAAA,SAAA,IAAA;AAAA;;AAGA,SAAA,OAAA,GAAA;AAAA,MAAA,IAAA,GAAA,OAAA,YAAA;;AAAA,EAAA,OAAA,GAAA,mBAAA;AAAA,WAAA,IAAA;AAAA,GAAA;;AAAA,SAAA,IAAA;AAAA;;;;;;;;AAEO,SAAA,iBAAA,CAAA,WAAA,EAAA,GAAA,EAGG;AACR,MAAIA,GAAJ,KAAA,IAAIA,IAAAA,GAAJ,KAAA,KAAA,CAAIA,IAAAA,GAAG,CAAP,UAAA,EAAqB;AACnB,WAAOA,GAAG,CAAV,UAAA;AACD;;AACD,MAAMC,eAAe,GAAGC,YAAAA,GAAAA,OAAAA,CAAAA,MAAAA,CAAAA,WAAAA,EAAxB,mBAAwBA,CAAxB;;AACA,MAAA,eAAA,EAAqB;AACnB,QAAMC,eAAe,GAAG,SAAA,GAAA,OAAA,CAAA,IAAA,CAAA,eAAA,EAA+B;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAA/B,CAAxB;;AACA,QAAiBE,cAAjB,GAAA,eAAA,CAAQD,OAAR;;AACA,QAAI,OAAA,cAAA,KAAJ,QAAA,EAAwC;AACtC,UAAME,YAAY,GAAGD,cAAc,CAAdA,KAAAA,CAAAA,GAAAA,EAArB,KAAqBA,EAArB;AACA,aAAA,YAAA;AACD;AACF;;AACD,QAAM,KAAIE,OAAAA,GAAJ,WAAA,mKAAN,kBAAM,CAAN;AAID","sourcesContent":["import JsonFile from '@expo/json-file';\nimport resolveFrom from 'resolve-from';\n\nimport { ExpoConfig } from './Config.types';\nimport { ConfigError } from './Errors';\n\nexport function getExpoSDKVersion(\n  projectRoot: string,\n  exp: Pick<ExpoConfig, 'sdkVersion'>\n): string {\n  if (exp?.sdkVersion) {\n    return exp.sdkVersion;\n  }\n  const packageJsonPath = resolveFrom.silent(projectRoot, 'expo/package.json');\n  if (packageJsonPath) {\n    const expoPackageJson = JsonFile.read(packageJsonPath, { json5: true });\n    const { version: packageVersion } = expoPackageJson;\n    if (typeof packageVersion === 'string') {\n      const majorVersion = packageVersion.split('.').shift();\n      return `${majorVersion}.0.0`;\n    }\n  }\n  throw new ConfigError(\n    `Cannot determine which native SDK version your project uses because the module \\`expo\\` is not installed. Please install it with \\`yarn add expo\\` and try again.`,\n    'MODULE_NOT_FOUND'\n  );\n}\n"]}