3ff3212417b03bcdde78f021bab659f0
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault2(require("@babel/runtime/regenerator"));

var _defineProperty2 = _interopRequireDefault2(require("@babel/runtime/helpers/defineProperty"));

var _slicedToArray2 = _interopRequireDefault2(require("@babel/runtime/helpers/slicedToArray"));

var _objectWithoutProperties2 = _interopRequireDefault2(require("@babel/runtime/helpers/objectWithoutProperties"));

var _excluded = ["mods"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

Object.defineProperty(exports, "__esModule", {
  value: true
});
var _exportNames = {
  getConfig: true,
  getPackageJson: true,
  readConfigJson: true,
  getConfigFilePaths: true,
  findConfigFile: true,
  configFilename: true,
  readExpRcAsync: true,
  resetCustomConfigPaths: true,
  setCustomConfigPath: true,
  modifyConfigAsync: true,
  writeConfigJsonAsync: true,
  getWebOutputPath: true,
  getNameFromConfig: true,
  getDefaultTarget: true,
  getProjectConfigDescription: true,
  getProjectConfigDescriptionWithPaths: true,
  isLegacyImportsEnabled: true
};
exports.getConfig = getConfig;
exports.getPackageJson = getPackageJson;
exports.readConfigJson = readConfigJson;
exports.getConfigFilePaths = getConfigFilePaths;
exports.findConfigFile = findConfigFile;
exports.configFilename = configFilename;
exports.readExpRcAsync = readExpRcAsync;
exports.resetCustomConfigPaths = resetCustomConfigPaths;
exports.setCustomConfigPath = setCustomConfigPath;
exports.modifyConfigAsync = modifyConfigAsync;
exports.writeConfigJsonAsync = writeConfigJsonAsync;
exports.getWebOutputPath = getWebOutputPath;
exports.getNameFromConfig = getNameFromConfig;
exports.getDefaultTarget = getDefaultTarget;
exports.getProjectConfigDescription = getProjectConfigDescription;
exports.getProjectConfigDescriptionWithPaths = getProjectConfigDescriptionWithPaths;
Object.defineProperty(exports, "isLegacyImportsEnabled", {
  enumerable: true,
  get: function get() {
    return _isLegacyImportsEnabled().isLegacyImportsEnabled;
  }
});

function _jsonFile() {
  var data = _interopRequireDefault(require("@expo/json-file"));

  _jsonFile = function _jsonFile() {
    return data;
  };

  return data;
}

function _fs() {
  var data = _interopRequireDefault(require("fs"));

  _fs = function _fs() {
    return data;
  };

  return data;
}

function _glob() {
  var data = require("glob");

  _glob = function _glob() {
    return data;
  };

  return data;
}

function _path() {
  var data = _interopRequireDefault(require("path"));

  _path = function _path() {
    return data;
  };

  return data;
}

function _resolveFrom() {
  var data = _interopRequireDefault(require("resolve-from"));

  _resolveFrom = function _resolveFrom() {
    return data;
  };

  return data;
}

function _semver() {
  var data = _interopRequireDefault(require("semver"));

  _semver = function _semver() {
    return data;
  };

  return data;
}

function _slugify() {
  var data = _interopRequireDefault(require("slugify"));

  _slugify = function _slugify() {
    return data;
  };

  return data;
}

function _Errors() {
  var data = require("./Errors");

  _Errors = function _Errors() {
    return data;
  };

  return data;
}

function _Project() {
  var data = require("./Project");

  _Project = function _Project() {
    return data;
  };

  return data;
}

function _getConfig() {
  var data = require("./getConfig");

  _getConfig = function _getConfig() {
    return data;
  };

  return data;
}

function _getFullName() {
  var data = require("./getFullName");

  _getFullName = function _getFullName() {
    return data;
  };

  return data;
}

function _withConfigPlugins() {
  var data = require("./plugins/withConfigPlugins");

  _withConfigPlugins = function _withConfigPlugins() {
    return data;
  };

  return data;
}

function _withInternal() {
  var data = require("./plugins/withInternal");

  _withInternal = function _withInternal() {
    return data;
  };

  return data;
}

function _resolvePackageJson() {
  var data = require("./resolvePackageJson");

  _resolvePackageJson = function _resolvePackageJson() {
    return data;
  };

  return data;
}

var _Config = require("./Config.types");

Object.keys(_Config).forEach(function (key) {
  if (key === "default" || key === "__esModule") return;
  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;
  if (key in exports && exports[key] === _Config[key]) return;
  Object.defineProperty(exports, key, {
    enumerable: true,
    get: function get() {
      return _Config[key];
    }
  });
});

function _isLegacyImportsEnabled() {
  var data = require("./isLegacyImportsEnabled");

  _isLegacyImportsEnabled = function _isLegacyImportsEnabled() {
    return data;
  };

  return data;
}

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function reduceExpoObject(config) {
  var _config$expo;

  if (!config) return config === undefined ? null : config;

  var _ref = (_config$expo = config.expo) !== null && _config$expo !== void 0 ? _config$expo : config,
      mods = _ref.mods,
      expo = (0, _objectWithoutProperties2.default)(_ref, _excluded);

  return {
    expo: expo,
    mods: mods
  };
}

function getSupportedPlatforms(projectRoot) {
  var platforms = [];

  if (_resolveFrom().default.silent(projectRoot, 'react-native')) {
    platforms.push('ios', 'android');
  }

  if (_resolveFrom().default.silent(projectRoot, 'react-native-web')) {
    platforms.push('web');
  }

  return platforms;
}

function getConfig(projectRoot) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var paths = getConfigFilePaths(projectRoot);
  var rawStaticConfig = paths.staticConfigPath ? (0, _getConfig().getStaticConfig)(paths.staticConfigPath) : null;
  var rootConfig = rawStaticConfig || {};
  var staticConfig = reduceExpoObject(rawStaticConfig) || {};

  var _getPackageJsonAndPat = getPackageJsonAndPath(projectRoot),
      _getPackageJsonAndPat2 = (0, _slicedToArray2.default)(_getPackageJsonAndPat, 2),
      packageJson = _getPackageJsonAndPat2[0],
      packageJsonPath = _getPackageJsonAndPat2[1];

  function fillAndReturnConfig(config, dynamicConfigObjectType) {
    var configWithDefaultValues = _objectSpread(_objectSpread({}, ensureConfigHasDefaultValues({
      projectRoot: projectRoot,
      exp: config.expo,
      pkg: packageJson,
      skipSDKVersionRequirement: options.skipSDKVersionRequirement,
      paths: paths,
      packageJsonPath: packageJsonPath
    })), {}, {
      mods: config.mods,
      dynamicConfigObjectType: dynamicConfigObjectType,
      rootConfig: rootConfig,
      dynamicConfigPath: paths.dynamicConfigPath,
      staticConfigPath: paths.staticConfigPath
    });

    if (options.isModdedConfig) {
      var _config$mods;

      configWithDefaultValues.exp.mods = (_config$mods = config.mods) !== null && _config$mods !== void 0 ? _config$mods : null;
    }

    configWithDefaultValues.exp = (0, _withConfigPlugins().withConfigPlugins)(configWithDefaultValues.exp, !!options.skipPlugins);

    if (!options.isModdedConfig) {
      delete configWithDefaultValues.exp.mods;
    }

    if (options.isPublicConfig) {
      var _configWithDefaultVal, _configWithDefaultVal2;

      delete configWithDefaultValues.exp._internal;

      if (configWithDefaultValues.exp.hooks) {
        delete configWithDefaultValues.exp.hooks;
      }

      if ((_configWithDefaultVal = configWithDefaultValues.exp.ios) !== null && _configWithDefaultVal !== void 0 && _configWithDefaultVal.config) {
        delete configWithDefaultValues.exp.ios.config;
      }

      if ((_configWithDefaultVal2 = configWithDefaultValues.exp.android) !== null && _configWithDefaultVal2 !== void 0 && _configWithDefaultVal2.config) {
        delete configWithDefaultValues.exp.android.config;
      }

      configWithDefaultValues.exp.currentFullName = (0, _getFullName().getFullName)(configWithDefaultValues.exp);
      configWithDefaultValues.exp.originalFullName = (0, _getFullName().getFullName)(configWithDefaultValues.exp);
    }

    return configWithDefaultValues;
  }

  function getContextConfig(config) {
    return ensureConfigHasDefaultValues({
      projectRoot: projectRoot,
      exp: config.expo,
      pkg: packageJson,
      skipSDKVersionRequirement: true,
      paths: paths,
      packageJsonPath: packageJsonPath
    }).exp;
  }

  if (paths.dynamicConfigPath) {
    var _ref2 = (0, _getConfig().getDynamicConfig)(paths.dynamicConfigPath, {
      projectRoot: projectRoot,
      staticConfigPath: paths.staticConfigPath,
      packageJsonPath: packageJsonPath,
      config: getContextConfig(staticConfig)
    }),
        exportedObjectType = _ref2.exportedObjectType,
        rawDynamicConfig = _ref2.config;

    var dynamicConfig = reduceExpoObject(rawDynamicConfig) || {};
    return fillAndReturnConfig(dynamicConfig, exportedObjectType);
  }

  return fillAndReturnConfig(staticConfig || {}, null);
}

function getPackageJson(projectRoot) {
  var _getPackageJsonAndPat3 = getPackageJsonAndPath(projectRoot),
      _getPackageJsonAndPat4 = (0, _slicedToArray2.default)(_getPackageJsonAndPat3, 1),
      pkg = _getPackageJsonAndPat4[0];

  return pkg;
}

function getPackageJsonAndPath(projectRoot) {
  var packageJsonPath = (0, _resolvePackageJson().getRootPackageJsonPath)(projectRoot);
  return [_jsonFile().default.read(packageJsonPath), packageJsonPath];
}

function readConfigJson(projectRoot) {
  var skipValidation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  var skipSDKVersionRequirement = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  var paths = getConfigFilePaths(projectRoot);
  var rawStaticConfig = paths.staticConfigPath ? (0, _getConfig().getStaticConfig)(paths.staticConfigPath) : null;

  var getConfigName = function getConfigName() {
    if (paths.staticConfigPath) return " `" + _path().default.basename(paths.staticConfigPath) + "`";
    return '';
  };

  var outputRootConfig = rawStaticConfig;

  if (outputRootConfig === null || typeof outputRootConfig !== 'object') {
    if (skipValidation) {
      outputRootConfig = {
        expo: {}
      };
    } else {
      throw new (_Errors().ConfigError)("Project at path " + _path().default.resolve(projectRoot) + " does not contain a valid Expo config" + getConfigName(), 'NOT_OBJECT');
    }
  }

  var exp = outputRootConfig.expo;

  if (exp === null || typeof exp !== 'object') {
    throw new (_Errors().ConfigError)("Property 'expo' in" + getConfigName() + " for project at path " + _path().default.resolve(projectRoot) + " is not an object. Please make sure" + getConfigName() + " includes a managed Expo app config like this: " + APP_JSON_EXAMPLE, 'NO_EXPO');
  }

  exp = _objectSpread({}, exp);

  var _getPackageJsonAndPat5 = getPackageJsonAndPath(projectRoot),
      _getPackageJsonAndPat6 = (0, _slicedToArray2.default)(_getPackageJsonAndPat5, 2),
      pkg = _getPackageJsonAndPat6[0],
      packageJsonPath = _getPackageJsonAndPat6[1];

  return _objectSpread(_objectSpread({}, ensureConfigHasDefaultValues({
    projectRoot: projectRoot,
    exp: exp,
    pkg: pkg,
    skipSDKVersionRequirement: skipSDKVersionRequirement,
    paths: paths,
    packageJsonPath: packageJsonPath
  })), {}, {
    mods: null,
    dynamicConfigPath: null,
    dynamicConfigObjectType: null,
    rootConfig: _objectSpread({}, outputRootConfig)
  }, paths);
}

function getConfigFilePaths(projectRoot) {
  var customPaths = getCustomConfigFilePaths(projectRoot);

  if (customPaths) {
    return customPaths;
  }

  return {
    dynamicConfigPath: getDynamicConfigFilePath(projectRoot),
    staticConfigPath: getStaticConfigFilePath(projectRoot)
  };
}

function getCustomConfigFilePaths(projectRoot) {
  if (!customConfigPaths[projectRoot]) {
    return null;
  }

  if (isDynamicFilePath(customConfigPaths[projectRoot])) {
    return {
      dynamicConfigPath: customConfigPaths[projectRoot],
      staticConfigPath: null
    };
  }

  return {
    staticConfigPath: customConfigPaths[projectRoot],
    dynamicConfigPath: null
  };
}

function getDynamicConfigFilePath(projectRoot) {
  for (var _i = 0, _arr = ['app.config.ts', 'app.config.js']; _i < _arr.length; _i++) {
    var fileName = _arr[_i];

    var configPath = _path().default.join(projectRoot, fileName);

    if (_fs().default.existsSync(configPath)) {
      return configPath;
    }
  }

  return null;
}

function getStaticConfigFilePath(projectRoot) {
  for (var _i2 = 0, _arr2 = ['app.config.json', 'app.json']; _i2 < _arr2.length; _i2++) {
    var fileName = _arr2[_i2];

    var configPath = _path().default.join(projectRoot, fileName);

    if (_fs().default.existsSync(configPath)) {
      return configPath;
    }
  }

  return null;
}

function findConfigFile(projectRoot) {
  var configPath;

  if (customConfigPaths[projectRoot]) {
    configPath = customConfigPaths[projectRoot];
    return {
      configPath: configPath,
      configName: _path().default.basename(configPath),
      configNamespace: 'expo'
    };
  } else {
    configPath = _path().default.join(projectRoot, 'app.config.json');

    if (!_fs().default.existsSync(configPath)) {
      configPath = _path().default.join(projectRoot, 'app.json');
    }
  }

  return {
    configPath: configPath,
    configName: _path().default.basename(configPath),
    configNamespace: 'expo'
  };
}

function configFilename(projectRoot) {
  return findConfigFile(projectRoot).configName;
}

function readExpRcAsync(projectRoot) {
  var expRcPath;
  return _regenerator.default.async(function readExpRcAsync$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          expRcPath = _path().default.join(projectRoot, '.exprc');
          _context.next = 3;
          return _regenerator.default.awrap(_jsonFile().default.readAsync(expRcPath, {
            json5: true,
            cantReadFileDefault: {}
          }));

        case 3:
          return _context.abrupt("return", _context.sent);

        case 4:
        case "end":
          return _context.stop();
      }
    }
  }, null, null, null, Promise);
}

var customConfigPaths = {};

function resetCustomConfigPaths() {
  for (var _i3 = 0, _Object$keys = Object.keys(customConfigPaths); _i3 < _Object$keys.length; _i3++) {
    var key = _Object$keys[_i3];
    delete customConfigPaths[key];
  }
}

function setCustomConfigPath(projectRoot, configPath) {
  customConfigPaths[projectRoot] = configPath;
}

function modifyConfigAsync(projectRoot, modifications) {
  var readOptions,
      writeOptions,
      config,
      outputConfig,
      _args2 = arguments;
  return _regenerator.default.async(function modifyConfigAsync$(_context2) {
    while (1) {
      switch (_context2.prev = _context2.next) {
        case 0:
          readOptions = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {};
          writeOptions = _args2.length > 3 && _args2[3] !== undefined ? _args2[3] : {};
          config = getConfig(projectRoot, readOptions);

          if (!config.dynamicConfigPath) {
            _context2.next = 7;
            break;
          }

          return _context2.abrupt("return", {
            type: 'warn',
            message: "Cannot automatically write to dynamic config at: " + _path().default.relative(projectRoot, config.dynamicConfigPath),
            config: null
          });

        case 7:
          if (!config.staticConfigPath) {
            _context2.next = 13;
            break;
          }

          if (config.rootConfig.expo) {
            outputConfig = _objectSpread(_objectSpread({}, config.rootConfig), {}, {
              expo: _objectSpread(_objectSpread({}, config.rootConfig.expo), modifications)
            });
          } else {
            outputConfig = _objectSpread(_objectSpread({}, config.rootConfig), modifications);
          }

          if (writeOptions.dryRun) {
            _context2.next = 12;
            break;
          }

          _context2.next = 12;
          return _regenerator.default.awrap(_jsonFile().default.writeAsync(config.staticConfigPath, outputConfig, {
            json5: false
          }));

        case 12:
          return _context2.abrupt("return", {
            type: 'success',
            config: outputConfig
          });

        case 13:
          return _context2.abrupt("return", {
            type: 'fail',
            message: 'No config exists',
            config: null
          });

        case 14:
        case "end":
          return _context2.stop();
      }
    }
  }, null, null, null, Promise);
}

var APP_JSON_EXAMPLE = JSON.stringify({
  expo: {
    name: 'My app',
    slug: 'my-app',
    sdkVersion: '...'
  }
});

function ensureConfigHasDefaultValues(_ref3) {
  var projectRoot = _ref3.projectRoot,
      exp = _ref3.exp,
      pkg = _ref3.pkg,
      paths = _ref3.paths,
      packageJsonPath = _ref3.packageJsonPath,
      _ref3$skipSDKVersionR = _ref3.skipSDKVersionRequirement,
      skipSDKVersionRequirement = _ref3$skipSDKVersionR === void 0 ? false : _ref3$skipSDKVersionR;

  var _exp$name, _exp$slug, _exp$version;

  if (!exp) {
    exp = {};
  }

  exp = (0, _withInternal().withInternal)(exp, _objectSpread(_objectSpread({
    projectRoot: projectRoot
  }, paths !== null && paths !== void 0 ? paths : {}), {}, {
    packageJsonPath: packageJsonPath
  }));
  var pkgName = typeof pkg.name === 'string' ? pkg.name : _path().default.basename(projectRoot);
  var pkgVersion = typeof pkg.version === 'string' ? pkg.version : '1.0.0';

  var pkgWithDefaults = _objectSpread(_objectSpread({}, pkg), {}, {
    name: pkgName,
    version: pkgVersion
  });

  var name = (_exp$name = exp.name) !== null && _exp$name !== void 0 ? _exp$name : pkgName;
  var slug = (_exp$slug = exp.slug) !== null && _exp$slug !== void 0 ? _exp$slug : (0, _slugify().default)(name.toLowerCase());
  var version = (_exp$version = exp.version) !== null && _exp$version !== void 0 ? _exp$version : pkgVersion;
  var description = exp.description;

  if (!description && typeof pkg.description === 'string') {
    description = pkg.description;
  }

  var expWithDefaults = _objectSpread(_objectSpread({}, exp), {}, {
    name: name,
    slug: slug,
    version: version,
    description: description
  });

  var sdkVersion;

  try {
    sdkVersion = (0, _Project().getExpoSDKVersion)(projectRoot, expWithDefaults);
  } catch (error) {
    if (!skipSDKVersionRequirement) throw error;
  }

  var platforms = exp.platforms;

  if (!platforms) {
    platforms = getSupportedPlatforms(projectRoot);
  }

  return {
    exp: _objectSpread(_objectSpread({}, expWithDefaults), {}, {
      sdkVersion: sdkVersion,
      platforms: platforms
    }),
    pkg: pkgWithDefaults
  };
}

function writeConfigJsonAsync(projectRoot, options) {
  var paths, _readConfigJson, exp, pkg, rootConfig, dynamicConfigObjectType, staticConfigPath;

  return _regenerator.default.async(function writeConfigJsonAsync$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          paths = getConfigFilePaths(projectRoot);
          _readConfigJson = readConfigJson(projectRoot), exp = _readConfigJson.exp, pkg = _readConfigJson.pkg, rootConfig = _readConfigJson.rootConfig, dynamicConfigObjectType = _readConfigJson.dynamicConfigObjectType, staticConfigPath = _readConfigJson.staticConfigPath;
          exp = _objectSpread(_objectSpread({}, rootConfig.expo), options);
          rootConfig = _objectSpread(_objectSpread({}, rootConfig), {}, {
            expo: exp
          });

          if (!paths.staticConfigPath) {
            _context3.next = 9;
            break;
          }

          _context3.next = 7;
          return _regenerator.default.awrap(_jsonFile().default.writeAsync(paths.staticConfigPath, rootConfig, {
            json5: false
          }));

        case 7:
          _context3.next = 10;
          break;

        case 9:
          console.log('Failed to write to config: ', options);

        case 10:
          return _context3.abrupt("return", _objectSpread({
            exp: exp,
            pkg: pkg,
            rootConfig: rootConfig,
            staticConfigPath: staticConfigPath,
            dynamicConfigObjectType: dynamicConfigObjectType
          }, paths));

        case 11:
        case "end":
          return _context3.stop();
      }
    }
  }, null, null, null, Promise);
}

var DEFAULT_BUILD_PATH = "web-build";

function getWebOutputPath() {
  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  var _expo$web, _expo$web$build;

  if (process.env.WEBPACK_BUILD_OUTPUT_PATH) {
    return process.env.WEBPACK_BUILD_OUTPUT_PATH;
  }

  var expo = config.expo || config || {};
  return (expo === null || expo === void 0 ? void 0 : (_expo$web = expo.web) === null || _expo$web === void 0 ? void 0 : (_expo$web$build = _expo$web.build) === null || _expo$web$build === void 0 ? void 0 : _expo$web$build.output) || DEFAULT_BUILD_PATH;
}

function getNameFromConfig() {
  var exp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var appManifest = exp.expo || exp;
  var _appManifest$web = appManifest.web,
      web = _appManifest$web === void 0 ? {} : _appManifest$web;
  var appName = exp.displayName || appManifest.displayName || appManifest.name;
  var webName = web.name || appName;
  return {
    appName: appName,
    webName: webName
  };
}

function getDefaultTarget(projectRoot) {
  var _getConfig2 = getConfig(projectRoot, {
    skipSDKVersionRequirement: true
  }),
      exp = _getConfig2.exp;

  if (exp.sdkVersion && exp.sdkVersion !== 'UNVERSIONED' && _semver().default.lt(exp.sdkVersion, '37.0.0')) {
    return 'managed';
  }

  return isBareWorkflowProject(projectRoot) ? 'bare' : 'managed';
}

function isBareWorkflowProject(projectRoot) {
  var _getPackageJsonAndPat7 = getPackageJsonAndPath(projectRoot),
      _getPackageJsonAndPat8 = (0, _slicedToArray2.default)(_getPackageJsonAndPat7, 1),
      pkg = _getPackageJsonAndPat8[0];

  if (pkg.dependencies && pkg.dependencies.expokit) {
    return false;
  }

  var xcodeprojFiles = (0, _glob().sync)('ios/**/*.xcodeproj', {
    absolute: true,
    cwd: projectRoot
  });

  if (xcodeprojFiles.length) {
    return true;
  }

  var gradleFiles = (0, _glob().sync)('android/**/*.gradle', {
    absolute: true,
    cwd: projectRoot
  });

  if (gradleFiles.length) {
    return true;
  }

  return false;
}

function isDynamicFilePath(filePath) {
  return !!filePath.match(/\.[j|t]s$/);
}

function getProjectConfigDescription(projectRoot) {
  var paths = getConfigFilePaths(projectRoot);
  return getProjectConfigDescriptionWithPaths(projectRoot, paths);
}

function getProjectConfigDescriptionWithPaths(projectRoot, projectConfig) {
  if (projectConfig.dynamicConfigPath) {
    var relativeDynamicConfigPath = _path().default.relative(projectRoot, projectConfig.dynamicConfigPath);

    if (projectConfig.staticConfigPath) {
      return relativeDynamicConfigPath + " or " + _path().default.relative(projectRoot, projectConfig.staticConfigPath);
    }

    return relativeDynamicConfigPath;
  } else if (projectConfig.staticConfigPath) {
    return _path().default.relative(projectRoot, projectConfig.staticConfigPath);
  }

  return 'app.json';
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9Db25maWcudHMiXSwibmFtZXMiOlsiY29uZmlnIiwiZXhwbyIsIm1vZHMiLCJwbGF0Zm9ybXMiLCJyZXNvbHZlRnJvbSIsIm9wdGlvbnMiLCJwYXRocyIsImdldENvbmZpZ0ZpbGVQYXRocyIsInJhd1N0YXRpY0NvbmZpZyIsInJvb3RDb25maWciLCJzdGF0aWNDb25maWciLCJyZWR1Y2VFeHBvT2JqZWN0IiwiZ2V0UGFja2FnZUpzb25BbmRQYXRoIiwiY29uZmlnV2l0aERlZmF1bHRWYWx1ZXMiLCJlbnN1cmVDb25maWdIYXNEZWZhdWx0VmFsdWVzIiwicHJvamVjdFJvb3QiLCJleHAiLCJwa2ciLCJza2lwU0RLVmVyc2lvblJlcXVpcmVtZW50IiwicGFja2FnZUpzb25QYXRoIiwiZHluYW1pY0NvbmZpZ09iamVjdFR5cGUiLCJkeW5hbWljQ29uZmlnUGF0aCIsInN0YXRpY0NvbmZpZ1BhdGgiLCJyYXdEeW5hbWljQ29uZmlnIiwiZ2V0Q29udGV4dENvbmZpZyIsImR5bmFtaWNDb25maWciLCJmaWxsQW5kUmV0dXJuQ29uZmlnIiwiSnNvbkZpbGUiLCJza2lwVmFsaWRhdGlvbiIsImdldENvbmZpZ05hbWUiLCJwYXRoIiwib3V0cHV0Um9vdENvbmZpZyIsIkNvbmZpZ0Vycm9yIiwiY3VzdG9tUGF0aHMiLCJnZXRDdXN0b21Db25maWdGaWxlUGF0aHMiLCJnZXREeW5hbWljQ29uZmlnRmlsZVBhdGgiLCJnZXRTdGF0aWNDb25maWdGaWxlUGF0aCIsImN1c3RvbUNvbmZpZ1BhdGhzIiwiaXNEeW5hbWljRmlsZVBhdGgiLCJmaWxlTmFtZSIsImNvbmZpZ1BhdGgiLCJmcyIsImNvbmZpZ05hbWUiLCJjb25maWdOYW1lc3BhY2UiLCJmaW5kQ29uZmlnRmlsZSIsImV4cFJjUGF0aCIsImpzb241IiwiY2FudFJlYWRGaWxlRGVmYXVsdCIsImtleSIsIk9iamVjdCIsInJlYWRPcHRpb25zIiwid3JpdGVPcHRpb25zIiwiZ2V0Q29uZmlnIiwidHlwZSIsIm1lc3NhZ2UiLCJvdXRwdXRDb25maWciLCJtb2RpZmljYXRpb25zIiwiQVBQX0pTT05fRVhBTVBMRSIsIm5hbWUiLCJzbHVnIiwic2RrVmVyc2lvbiIsInBrZ05hbWUiLCJwa2dWZXJzaW9uIiwicGtnV2l0aERlZmF1bHRzIiwidmVyc2lvbiIsImRlc2NyaXB0aW9uIiwiZXhwV2l0aERlZmF1bHRzIiwiZ2V0U3VwcG9ydGVkUGxhdGZvcm1zIiwicmVhZENvbmZpZ0pzb24iLCJjb25zb2xlIiwiREVGQVVMVF9CVUlMRF9QQVRIIiwicHJvY2VzcyIsImFwcE1hbmlmZXN0Iiwid2ViIiwiYXBwTmFtZSIsIndlYk5hbWUiLCJzZW12ZXIiLCJpc0JhcmVXb3JrZmxvd1Byb2plY3QiLCJ4Y29kZXByb2pGaWxlcyIsImFic29sdXRlIiwiY3dkIiwiZ3JhZGxlRmlsZXMiLCJmaWxlUGF0aCIsImdldFByb2plY3RDb25maWdEZXNjcmlwdGlvbldpdGhQYXRocyIsInByb2plY3RDb25maWciLCJyZWxhdGl2ZUR5bmFtaWNDb25maWdQYXRoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxTQUFBLFNBQUEsR0FBQTtBQUFBLE1BQUEsSUFBQSxHQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLGlCQUFBLENBQUEsQ0FBQTs7QUFBQSxFQUFBLFNBQUEsR0FBQSxxQkFBQTtBQUFBLFdBQUEsSUFBQTtBQUFBLEdBQUE7O0FBQUEsU0FBQSxJQUFBO0FBQUE7O0FBQ0EsU0FBQSxHQUFBLEdBQUE7QUFBQSxNQUFBLElBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTs7QUFBQSxFQUFBLEdBQUEsR0FBQSxlQUFBO0FBQUEsV0FBQSxJQUFBO0FBQUEsR0FBQTs7QUFBQSxTQUFBLElBQUE7QUFBQTs7QUFDQSxTQUFBLEtBQUEsR0FBQTtBQUFBLE1BQUEsSUFBQSxHQUFBLE9BQUEsQ0FBQSxNQUFBLENBQUE7O0FBQUEsRUFBQSxLQUFBLEdBQUEsaUJBQUE7QUFBQSxXQUFBLElBQUE7QUFBQSxHQUFBOztBQUFBLFNBQUEsSUFBQTtBQUFBOztBQUNBLFNBQUEsS0FBQSxHQUFBO0FBQUEsTUFBQSxJQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsTUFBQSxDQUFBLENBQUE7O0FBQUEsRUFBQSxLQUFBLEdBQUEsaUJBQUE7QUFBQSxXQUFBLElBQUE7QUFBQSxHQUFBOztBQUFBLFNBQUEsSUFBQTtBQUFBOztBQUNBLFNBQUEsWUFBQSxHQUFBO0FBQUEsTUFBQSxJQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsY0FBQSxDQUFBLENBQUE7O0FBQUEsRUFBQSxZQUFBLEdBQUEsd0JBQUE7QUFBQSxXQUFBLElBQUE7QUFBQSxHQUFBOztBQUFBLFNBQUEsSUFBQTtBQUFBOztBQUNBLFNBQUEsT0FBQSxHQUFBO0FBQUEsTUFBQSxJQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsUUFBQSxDQUFBLENBQUE7O0FBQUEsRUFBQSxPQUFBLEdBQUEsbUJBQUE7QUFBQSxXQUFBLElBQUE7QUFBQSxHQUFBOztBQUFBLFNBQUEsSUFBQTtBQUFBOztBQUNBLFNBQUEsUUFBQSxHQUFBO0FBQUEsTUFBQSxJQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsU0FBQSxDQUFBLENBQUE7O0FBQUEsRUFBQSxRQUFBLEdBQUEsb0JBQUE7QUFBQSxXQUFBLElBQUE7QUFBQSxHQUFBOztBQUFBLFNBQUEsSUFBQTtBQUFBOztBQWNBLFNBQUEsT0FBQSxHQUFBO0FBQUEsTUFBQSxJQUFBLEdBQUEsT0FBQSxZQUFBOztBQUFBLEVBQUEsT0FBQSxHQUFBLG1CQUFBO0FBQUEsV0FBQSxJQUFBO0FBQUEsR0FBQTs7QUFBQSxTQUFBLElBQUE7QUFBQTs7QUFDQSxTQUFBLFFBQUEsR0FBQTtBQUFBLE1BQUEsSUFBQSxHQUFBLE9BQUEsYUFBQTs7QUFBQSxFQUFBLFFBQUEsR0FBQSxvQkFBQTtBQUFBLFdBQUEsSUFBQTtBQUFBLEdB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LEdBQUdDLGtCQUFrQixDQUFoQyxXQUFnQyxDQUFoQztBQUNBLFNBQU80RSxvQ0FBb0MsQ0FBQSxXQUFBLEVBQTNDLEtBQTJDLENBQTNDO0FBQ0Q7O0FBU00sU0FBQSxvQ0FBQSxDQUFBLFdBQUEsRUFBQSxhQUFBLEVBR0c7QUFDUixNQUFJQyxhQUFhLENBQWpCLGlCQUFBLEVBQXFDO0FBQ25DLFFBQU1DLHlCQUF5QixHQUFHdkQsS0FBQUEsR0FBQUEsT0FBQUEsQ0FBQUEsUUFBQUEsQ0FBQUEsV0FBQUEsRUFBMkJzRCxhQUFhLENBQTFFLGlCQUFrQ3RELENBQWxDOztBQUNBLFFBQUlzRCxhQUFhLENBQWpCLGdCQUFBLEVBQW9DO0FBQ2xDLGFBQVVDLHlCQUFWLFlBQTBDdkQsS0FBQUEsR0FBQUEsT0FBQUEsQ0FBQUEsUUFBQUEsQ0FBQUEsV0FBQUEsRUFFeENzRCxhQUFhLENBRmYsZ0JBQTBDdEQsQ0FBMUM7QUFJRDs7QUFDRCxXQUFBLHlCQUFBO0FBUkYsR0FBQSxNQVNPLElBQUlzRCxhQUFhLENBQWpCLGdCQUFBLEVBQW9DO0FBQ3pDLFdBQU90RCxLQUFBQSxHQUFBQSxPQUFBQSxDQUFBQSxRQUFBQSxDQUFBQSxXQUFBQSxFQUEyQnNELGFBQWEsQ0FBL0MsZ0JBQU90RCxDQUFQO0FBWE07O0FBY1IsU0FBQSxVQUFBO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2RDb25maWcgfSBmcm9tICdAZXhwby9jb25maWctcGx1Z2lucyc7XG5pbXBvcnQgSnNvbkZpbGUsIHsgSlNPTk9iamVjdCB9IGZyb20gJ0BleHBvL2pzb24tZmlsZSc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHsgc3luYyBhcyBnbG9iU3luYyB9IGZyb20gJ2dsb2InO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgcmVzb2x2ZUZyb20gZnJvbSAncmVzb2x2ZS1mcm9tJztcbmltcG9ydCBzZW12ZXIgZnJvbSAnc2VtdmVyJztcbmltcG9ydCBzbHVnaWZ5IGZyb20gJ3NsdWdpZnknO1xuXG5pbXBvcnQge1xuICBBcHBKU09OQ29uZmlnLFxuICBDb25maWdGaWxlUGF0aHMsXG4gIEV4cG9Db25maWcsXG4gIEV4cFJjLFxuICBHZXRDb25maWdPcHRpb25zLFxuICBQYWNrYWdlSlNPTkNvbmZpZyxcbiAgUGxhdGZvcm0sXG4gIFByb2plY3RDb25maWcsXG4gIFByb2plY3RUYXJnZXQsXG4gIFdyaXRlQ29uZmlnT3B0aW9ucyxcbn0gZnJvbSAnLi9Db25maWcudHlwZXMnO1xuaW1wb3J0IHsgQ29uZmlnRXJyb3IgfSBmcm9tICcuL0Vycm9ycyc7XG5pbXBvcnQgeyBnZXRFeHBvU0RLVmVyc2lvbiB9IGZyb20gJy4vUHJvamVjdCc7XG5pbXBvcnQgeyBnZXREeW5hbWljQ29uZmlnLCBnZXRTdGF0aWNDb25maWcgfSBmcm9tICcuL2dldENvbmZpZyc7XG5pbXBvcnQgeyBnZXRGdWxsTmFtZSB9IGZyb20gJy4vZ2V0RnVsbE5hbWUnO1xuaW1wb3J0IHsgd2l0aENvbmZpZ1BsdWdpbnMgfSBmcm9tICcuL3BsdWdpbnMvd2l0aENvbmZpZ1BsdWdpbnMnO1xuaW1wb3J0IHsgd2l0aEludGVybmFsIH0gZnJvbSAnLi9wbHVnaW5zL3dpdGhJbnRlcm5hbCc7XG5pbXBvcnQgeyBnZXRSb290UGFja2FnZUpzb25QYXRoIH0gZnJvbSAnLi9yZXNvbHZlUGFja2FnZUpzb24nO1xuXG50eXBlIFNwbGl0Q29uZmlncyA9IHsgZXhwbzogRXhwb0NvbmZpZzsgbW9kczogTW9kQ29uZmlnIH07XG5cbi8qKlxuICogSWYgYSBjb25maWcgaGFzIGFuIGBleHBvYCBvYmplY3QgdGhlbiB0aGF0IHdpbGwgYmUgdXNlZCBhcyB0aGUgY29uZmlnLlxuICogVGhpcyBtZXRob2QgcmVkdWNlcyBvdXQgb3RoZXIgdG9wIGxldmVsIHZhbHVlcyBpZiBhbiBgZXhwb2Agb2JqZWN0IGV4aXN0cy5cbiAqXG4gKiBAcGFyYW0gY29uZmlnIElucHV0IGNvbmZpZyBvYmplY3QgdG8gcmVkdWNlXG4gKi9cbmZ1bmN0aW9uIHJlZHVjZUV4cG9PYmplY3QoY29uZmlnPzogYW55KTogU3BsaXRDb25maWdzIHtcbiAgaWYgKCFjb25maWcpIHJldHVybiBjb25maWcgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjb25maWc7XG5cbiAgY29uc3QgeyBtb2RzLCAuLi5leHBvIH0gPSBjb25maWcuZXhwbyA/PyBjb25maWc7XG5cbiAgcmV0dXJuIHtcbiAgICBleHBvLFxuICAgIG1vZHMsXG4gIH07XG59XG5cbi8qKlxuICogR2V0IGFsbCBwbGF0Zm9ybXMgdGhhdCBhIHByb2plY3QgaXMgY3VycmVudGx5IGNhcGFibGUgb2YgcnVubmluZy5cbiAqXG4gKiBAcGFyYW0gcHJvamVjdFJvb3RcbiAqIEBwYXJhbSBleHBcbiAqL1xuZnVuY3Rpb24gZ2V0U3VwcG9ydGVkUGxhdGZvcm1zKHByb2plY3RSb290OiBzdHJpbmcpOiBQbGF0Zm9ybVtdIHtcbiAgY29uc3QgcGxhdGZvcm1zOiBQbGF0Zm9ybVtdID0gW107XG4gIGlmIChyZXNvbHZlRnJvbS5zaWxlbnQocHJvamVjdFJvb3QsICdyZWFjdC1uYXRpdmUnKSkge1xuICAgIHBsYXRmb3Jtcy5wdXNoKCdpb3MnLCAnYW5kcm9pZCcpO1xuICB9XG4gIGlmIChyZXNvbHZlRnJvbS5zaWxlbnQocHJvamVjdFJvb3QsICdyZWFjdC1uYXRpdmUtd2ViJykpIHtcbiAgICBwbGF0Zm9ybXMucHVzaCgnd2ViJyk7XG4gIH1cbiAgcmV0dXJuIHBsYXRmb3Jtcztcbn1cblxuLyoqXG4gKiBFdmFsdWF0ZSB0aGUgY29uZmlnIGZvciBhbiBFeHBvIHByb2plY3QuXG4gKiBJZiBhIGZ1bmN0aW9uIGlzIGV4cG9ydGVkIGZyb20gdGhlIGBhcHAuY29uZmlnLmpzYCB0aGVuIGEgcGFydGlhbCBjb25maWcgd2lsbCBiZSBwYXNzZWQgYXMgYW4gYXJndW1lbnQuXG4gKiBUaGUgcGFydGlhbCBjb25maWcgaXMgY29tcG9zZWQgZnJvbSBhbnkgZXhpc3RpbmcgYXBwLmpzb24sIGFuZCBjZXJ0YWluIGZpZWxkcyBmcm9tIHRoZSBgcGFja2FnZS5qc29uYCBsaWtlIG5hbWUgYW5kIGRlc2NyaXB0aW9uLlxuICpcbiAqIElmIG9wdGlvbnMuaXNQdWJsaWNDb25maWcgaXMgdHJ1ZSwgdGhlIEV4cG8gY29uZmlnIHdpbGwgaW5jbHVkZSBvbmx5IHB1YmxpYy1mYWNpbmcgb3B0aW9ucyAob21pdHRpbmcgcHJpdmF0ZSBrZXlzKS5cbiAqIFRoZSByZXN1bHRpbmcgY29uZmlnIHNob3VsZCBiZSBzdWl0YWJsZSBmb3IgaG9zdGluZyBvciBlbWJlZGRpbmcgaW4gYSBwdWJsaWNseSByZWFkYWJsZSBsb2NhdGlvbi5cbiAqXG4gKiAqKkV4YW1wbGUqKlxuICogYGBganNcbiAqIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oeyBjb25maWcgfSkge1xuICogICAvLyBtdXRhdGUgdGhlIGNvbmZpZyBiZWZvcmUgcmV0dXJuaW5nIGl0LlxuICogICBjb25maWcuc2x1ZyA9ICduZXcgc2x1ZydcbiAqICAgcmV0dXJuIHsgZXhwbzogY29uZmlnIH07XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiAqKlN1cHBvcnRzKipcbiAqIC0gYGFwcC5jb25maWcudHNgXG4gKiAtIGBhcHAuY29uZmlnLmpzYFxuICogLSBgYXBwLmNvbmZpZy5qc29uYFxuICogLSBgYXBwLmpzb25gXG4gKlxuICogQHBhcmFtIHByb2plY3RSb290IHRoZSByb290IGZvbGRlciBjb250YWluaW5nIGFsbCBvZiB5b3VyIGFwcGxpY2F0aW9uIGNvZGVcbiAqIEBwYXJhbSBvcHRpb25zIGVuZm9yY2UgY3JpdGVyaWEgZm9yIGEgcHJvamVjdCBjb25maWdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZyhwcm9qZWN0Um9vdDogc3RyaW5nLCBvcHRpb25zOiBHZXRDb25maWdPcHRpb25zID0ge30pOiBQcm9qZWN0Q29uZmlnIHtcbiAgY29uc3QgcGF0aHMgPSBnZXRDb25maWdGaWxlUGF0aHMocHJvamVjdFJvb3QpO1xuXG4gIGNvbnN0IHJhd1N0YXRpY0NvbmZpZyA9IHBhdGhzLnN0YXRpY0NvbmZpZ1BhdGggPyBnZXRTdGF0aWNDb25maWcocGF0aHMuc3RhdGljQ29uZmlnUGF0aCkgOiBudWxsO1xuICAvLyBGb3IgbGVnYWN5IHJlYXNvbnMsIGFsd2F5cyByZXR1cm4gYW4gb2JqZWN0LlxuICBjb25zdCByb290Q29uZmlnID0gKHJhd1N0YXRpY0NvbmZpZyB8fCB7fSkgYXMgQXBwSlNPTkNvbmZpZztcbiAgY29uc3Qgc3RhdGljQ29uZmlnID0gcmVkdWNlRXhwb09iamVjdChyYXdTdGF0aWNDb25maWcpIHx8IHt9O1xuXG4gIC8vIENhbiBvbmx5IGNoYW5nZSB0aGUgcGFja2FnZS5qc29uIGxvY2F0aW9uIGlmIGFuIGFwcC5qc29uIG9yIGFwcC5jb25maWcuanNvbiBleGlzdHNcbiAgY29uc3QgW3BhY2thZ2VKc29uLCBwYWNrYWdlSnNvblBhdGhdID0gZ2V0UGFja2FnZUpzb25BbmRQYXRoKHByb2plY3RSb290KTtcblxuICBmdW5jdGlvbiBmaWxsQW5kUmV0dXJuQ29uZmlnKGNvbmZpZzogU3BsaXRDb25maWdzLCBkeW5hbWljQ29uZmlnT2JqZWN0VHlwZTogc3RyaW5nIHwgbnVsbCkge1xuICAgIGNvbnN0IGNvbmZpZ1dpdGhEZWZhdWx0VmFsdWVzID0ge1xuICAgICAgLi4uZW5zdXJlQ29uZmlnSGFzRGVmYXVsdFZhbHVlcyh7XG4gICAgICAgIHByb2plY3RSb290LFxuICAgICAgICBleHA6IGNvbmZpZy5leHBvLFxuICAgICAgICBwa2c6IHBhY2thZ2VKc29uLFxuICAgICAgICBza2lwU0RLVmVyc2lvblJlcXVpcmVtZW50OiBvcHRpb25zLnNraXBTREtWZXJzaW9uUmVxdWlyZW1lbnQsXG4gICAgICAgIHBhdGhzLFxuICAgICAgICBwYWNrYWdlSnNvblBhdGgsXG4gICAgICB9KSxcbiAgICAgIG1vZHM6IGNvbmZpZy5tb2RzLFxuICAgICAgZHluYW1pY0NvbmZpZ09iamVjdFR5cGUsXG4gICAgICByb290Q29uZmlnLFxuICAgICAgZHluYW1pY0NvbmZpZ1BhdGg6IHBhdGhzLmR5bmFtaWNDb25maWdQYXRoLFxuICAgICAgc3RhdGljQ29uZmlnUGF0aDogcGF0aHMuc3RhdGljQ29uZmlnUGF0aCxcbiAgICB9O1xuXG4gICAgaWYgKG9wdGlvbnMuaXNNb2RkZWRDb25maWcpIHtcbiAgICAgIC8vIEB0cy1pZ25vcmU6IEFkZCB0aGUgbW9kcyBiYWNrIHRvIHRoZSBvYmplY3QuXG4gICAgICBjb25maWdXaXRoRGVmYXVsdFZhbHVlcy5leHAubW9kcyA9IGNvbmZpZy5tb2RzID8/IG51bGw7XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgc3RhdGljIGpzb24gcGx1Z2lucywgc2hvdWxkIGJlIGRvbmUgYWZ0ZXIgX2ludGVybmFsXG4gICAgY29uZmlnV2l0aERlZmF1bHRWYWx1ZXMuZXhwID0gd2l0aENvbmZpZ1BsdWdpbnMoXG4gICAgICBjb25maWdXaXRoRGVmYXVsdFZhbHVlcy5leHAsXG4gICAgICAhIW9wdGlvbnMuc2tpcFBsdWdpbnNcbiAgICApO1xuXG4gICAgaWYgKCFvcHRpb25zLmlzTW9kZGVkQ29uZmlnKSB7XG4gICAgICAvLyBAdHMtaWdub3JlOiBEZWxldGUgbW9kcyBhZGRlZCBieSBzdGF0aWMgcGx1Z2lucyB3aGVuIHRoZXkgd29uJ3QgaGF2ZSBhIGNoYW5jZSB0byBiZSBldmFsdWF0ZWRcbiAgICAgIGRlbGV0ZSBjb25maWdXaXRoRGVmYXVsdFZhbHVlcy5leHAubW9kcztcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5pc1B1YmxpY0NvbmZpZykge1xuICAgICAgLy8gUmVtb3ZlIGludGVybmFsIHZhbHVlcyB3aXRoIHJlZmVyZW5jZXMgdG8gdXNlcidzIGZpbGUgcGF0aHMgZnJvbSB0aGUgcHVibGljIGNvbmZpZy5cbiAgICAgIGRlbGV0ZSBjb25maWdXaXRoRGVmYXVsdFZhbHVlcy5leHAuX2ludGVybmFsO1xuXG4gICAgICBpZiAoY29uZmlnV2l0aERlZmF1bHRWYWx1ZXMuZXhwLmhvb2tzKSB7XG4gICAgICAgIGRlbGV0ZSBjb25maWdXaXRoRGVmYXVsdFZhbHVlcy5leHAuaG9va3M7XG4gICAgICB9XG4gICAgICBpZiAoY29uZmlnV2l0aERlZmF1bHRWYWx1ZXMuZXhwLmlvcz8uY29uZmlnKSB7XG4gICAgICAgIGRlbGV0ZSBjb25maWdXaXRoRGVmYXVsdFZhbHVlcy5leHAuaW9zLmNvbmZpZztcbiAgICAgIH1cbiAgICAgIGlmIChjb25maWdXaXRoRGVmYXVsdFZhbHVlcy5leHAuYW5kcm9pZD8uY29uZmlnKSB7XG4gICAgICAgIGRlbGV0ZSBjb25maWdXaXRoRGVmYXVsdFZhbHVlcy5leHAuYW5kcm9pZC5jb25maWc7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZXNlIHZhbHVlIHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2hlbiB0aGUgbWFuaWZlc3QgaXMgYmVpbmcgc2VydmVkIGZyb20gdGhlIGhvc3QgKGkuZS4gbm90IGNvbXBsZXRlbHkgYWNjdXJhdGUpLlxuICAgICAgLy8gQHRzLWlnbm9yZTogY3VycmVudEZ1bGxOYW1lIG5vdCBvbiB0eXBlIHlldC5cbiAgICAgIGNvbmZpZ1dpdGhEZWZhdWx0VmFsdWVzLmV4cC5jdXJyZW50RnVsbE5hbWUgPSBnZXRGdWxsTmFtZShjb25maWdXaXRoRGVmYXVsdFZhbHVlcy5leHApO1xuICAgICAgLy8gQHRzLWlnbm9yZTogb3JpZ2luYWxGdWxsTmFtZSBub3Qgb24gdHlwZSB5ZXQuXG4gICAgICBjb25maWdXaXRoRGVmYXVsdFZhbHVlcy5leHAub3JpZ2luYWxGdWxsTmFtZSA9IGdldEZ1bGxOYW1lKGNvbmZpZ1dpdGhEZWZhdWx0VmFsdWVzLmV4cCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbmZpZ1dpdGhEZWZhdWx0VmFsdWVzO1xuICB9XG5cbiAgLy8gRmlsbCBpbiB0aGUgc3RhdGljIGNvbmZpZ1xuICBmdW5jdGlvbiBnZXRDb250ZXh0Q29uZmlnKGNvbmZpZzogU3BsaXRDb25maWdzKSB7XG4gICAgcmV0dXJuIGVuc3VyZUNvbmZpZ0hhc0RlZmF1bHRWYWx1ZXMoe1xuICAgICAgcHJvamVjdFJvb3QsXG4gICAgICBleHA6IGNvbmZpZy5leHBvLFxuICAgICAgcGtnOiBwYWNrYWdlSnNvbixcbiAgICAgIHNraXBTREtWZXJzaW9uUmVxdWlyZW1lbnQ6IHRydWUsXG4gICAgICBwYXRocyxcbiAgICAgIHBhY2thZ2VKc29uUGF0aCxcbiAgICB9KS5leHA7XG4gIH1cblxuICBpZiAocGF0aHMuZHluYW1pY0NvbmZpZ1BhdGgpIHtcbiAgICAvLyBObyBhcHAuY29uZmlnLmpzb24gb3IgYXBwLmpzb24gYnV0IGFwcC5jb25maWcuanNcbiAgICBjb25zdCB7IGV4cG9ydGVkT2JqZWN0VHlwZSwgY29uZmlnOiByYXdEeW5hbWljQ29uZmlnIH0gPSBnZXREeW5hbWljQ29uZmlnKFxuICAgICAgcGF0aHMuZHluYW1pY0NvbmZpZ1BhdGgsXG4gICAgICB7XG4gICAgICAgIHByb2plY3RSb290LFxuICAgICAgICBzdGF0aWNDb25maWdQYXRoOiBwYXRocy5zdGF0aWNDb25maWdQYXRoLFxuICAgICAgICBwYWNrYWdlSnNvblBhdGgsXG4gICAgICAgIGNvbmZpZzogZ2V0Q29udGV4dENvbmZpZyhzdGF0aWNDb25maWcpLFxuICAgICAgfVxuICAgICk7XG4gICAgLy8gQWxsb3cgZm9yIHRoZSBhcHAuY29uZmlnLmpzIHRvIGBleHBvcnQgZGVmYXVsdCBudWxsO2BcbiAgICAvLyBVc2UgYGR5bmFtaWNDb25maWdQYXRoYCB0byBkZXRlY3QgaWYgYSBkeW5hbWljIGNvbmZpZyBleGlzdHMuXG4gICAgY29uc3QgZHluYW1pY0NvbmZpZyA9IHJlZHVjZUV4cG9PYmplY3QocmF3RHluYW1pY0NvbmZpZykgfHwge307XG4gICAgcmV0dXJuIGZpbGxBbmRSZXR1cm5Db25maWcoZHluYW1pY0NvbmZpZywgZXhwb3J0ZWRPYmplY3RUeXBlKTtcbiAgfVxuXG4gIC8vIE5vIGFwcC5jb25maWcuanMgYnV0IGpzb24gb3Igbm8gY29uZmlnXG4gIHJldHVybiBmaWxsQW5kUmV0dXJuQ29uZmlnKHN0YXRpY0NvbmZpZyB8fCB7fSwgbnVsbCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYWNrYWdlSnNvbihwcm9qZWN0Um9vdDogc3RyaW5nKTogUGFja2FnZUpTT05Db25maWcge1xuICBjb25zdCBbcGtnXSA9IGdldFBhY2thZ2VKc29uQW5kUGF0aChwcm9qZWN0Um9vdCk7XG4gIHJldHVybiBwa2c7XG59XG5cbmZ1bmN0aW9uIGdldFBhY2thZ2VKc29uQW5kUGF0aChwcm9qZWN0Um9vdDogc3RyaW5nKTogW1BhY2thZ2VKU09OQ29uZmlnLCBzdHJpbmddIHtcbiAgY29uc3QgcGFja2FnZUpzb25QYXRoID0gZ2V0Um9vdFBhY2thZ2VKc29uUGF0aChwcm9qZWN0Um9vdCk7XG4gIHJldHVybiBbSnNvbkZpbGUucmVhZChwYWNrYWdlSnNvblBhdGgpLCBwYWNrYWdlSnNvblBhdGhdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVhZENvbmZpZ0pzb24oXG4gIHByb2plY3RSb290OiBzdHJpbmcsXG4gIHNraXBWYWxpZGF0aW9uOiBib29sZWFuID0gZmFsc2UsXG4gIHNraXBTREtWZXJzaW9uUmVxdWlyZW1lbnQ6IGJvb2xlYW4gPSBmYWxzZVxuKTogUHJvamVjdENvbmZpZyB7XG4gIGNvbnN0IHBhdGhzID0gZ2V0Q29uZmlnRmlsZVBhdGhzKHByb2plY3RSb290KTtcblxuICBjb25zdCByYXdTdGF0aWNDb25maWcgPSBwYXRocy5zdGF0aWNDb25maWdQYXRoID8gZ2V0U3RhdGljQ29uZmlnKHBhdGhzLnN0YXRpY0NvbmZpZ1BhdGgpIDogbnVsbDtcblxuICBjb25zdCBnZXRDb25maWdOYW1lID0gKCk6IHN0cmluZyA9PiB7XG4gICAgaWYgKHBhdGhzLnN0YXRpY0NvbmZpZ1BhdGgpIHJldHVybiBgIFxcYCR7cGF0aC5iYXNlbmFtZShwYXRocy5zdGF0aWNDb25maWdQYXRoKX1cXGBgO1xuICAgIHJldHVybiAnJztcbiAgfTtcblxuICBsZXQgb3V0cHV0Um9vdENvbmZpZyA9IHJhd1N0YXRpY0NvbmZpZyBhcyBKU09OT2JqZWN0IHwgbnVsbDtcbiAgaWYgKG91dHB1dFJvb3RDb25maWcgPT09IG51bGwgfHwgdHlwZW9mIG91dHB1dFJvb3RDb25maWcgIT09ICdvYmplY3QnKSB7XG4gICAgaWYgKHNraXBWYWxpZGF0aW9uKSB7XG4gICAgICBvdXRwdXRSb290Q29uZmlnID0geyBleHBvOiB7fSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmlnRXJyb3IoXG4gICAgICAgIGBQcm9qZWN0IGF0IHBhdGggJHtwYXRoLnJlc29sdmUoXG4gICAgICAgICAgcHJvamVjdFJvb3RcbiAgICAgICAgKX0gZG9lcyBub3QgY29udGFpbiBhIHZhbGlkIEV4cG8gY29uZmlnJHtnZXRDb25maWdOYW1lKCl9YCxcbiAgICAgICAgJ05PVF9PQkpFQ1QnXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBsZXQgZXhwID0gb3V0cHV0Um9vdENvbmZpZy5leHBvIGFzIFBhcnRpYWw8RXhwb0NvbmZpZz47XG4gIGlmIChleHAgPT09IG51bGwgfHwgdHlwZW9mIGV4cCAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgQ29uZmlnRXJyb3IoXG4gICAgICBgUHJvcGVydHkgJ2V4cG8nIGluJHtnZXRDb25maWdOYW1lKCl9IGZvciBwcm9qZWN0IGF0IHBhdGggJHtwYXRoLnJlc29sdmUoXG4gICAgICAgIHByb2plY3RSb290XG4gICAgICApfSBpcyBub3QgYW4gb2JqZWN0LiBQbGVhc2UgbWFrZSBzdXJlJHtnZXRDb25maWdOYW1lKCl9IGluY2x1ZGVzIGEgbWFuYWdlZCBFeHBvIGFwcCBjb25maWcgbGlrZSB0aGlzOiAke0FQUF9KU09OX0VYQU1QTEV9YCxcbiAgICAgICdOT19FWFBPJ1xuICAgICk7XG4gIH1cblxuICBleHAgPSB7IC4uLmV4cCB9O1xuXG4gIGNvbnN0IFtwa2csIHBhY2thZ2VKc29uUGF0aF0gPSBnZXRQYWNrYWdlSnNvbkFuZFBhdGgocHJvamVjdFJvb3QpO1xuXG4gIHJldHVybiB7XG4gICAgLi4uZW5zdXJlQ29uZmlnSGFzRGVmYXVsdFZhbHVlcyh7XG4gICAgICBwcm9qZWN0Um9vdCxcbiAgICAgIGV4cCxcbiAgICAgIHBrZyxcbiAgICAgIHNraXBTREtWZXJzaW9uUmVxdWlyZW1lbnQsXG4gICAgICBwYXRocyxcbiAgICAgIHBhY2thZ2VKc29uUGF0aCxcbiAgICB9KSxcbiAgICBtb2RzOiBudWxsLFxuICAgIGR5bmFtaWNDb25maWdQYXRoOiBudWxsLFxuICAgIGR5bmFtaWNDb25maWdPYmplY3RUeXBlOiBudWxsLFxuICAgIHJvb3RDb25maWc6IHsgLi4ub3V0cHV0Um9vdENvbmZpZyB9IGFzIEFwcEpTT05Db25maWcsXG4gICAgLi4ucGF0aHMsXG4gIH07XG59XG5cbi8qKlxuICogR2V0IHRoZSBzdGF0aWMgYW5kIGR5bmFtaWMgY29uZmlnIHBhdGhzIGZvciBhIHByb2plY3QuIEFsc28gYWNjb3VudHMgZm9yIGN1c3RvbSBwYXRocy5cbiAqXG4gKiBAcGFyYW0gcHJvamVjdFJvb3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZ0ZpbGVQYXRocyhwcm9qZWN0Um9vdDogc3RyaW5nKTogQ29uZmlnRmlsZVBhdGhzIHtcbiAgY29uc3QgY3VzdG9tUGF0aHMgPSBnZXRDdXN0b21Db25maWdGaWxlUGF0aHMocHJvamVjdFJvb3QpO1xuICBpZiAoY3VzdG9tUGF0aHMpIHtcbiAgICByZXR1cm4gY3VzdG9tUGF0aHM7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGR5bmFtaWNDb25maWdQYXRoOiBnZXREeW5hbWljQ29uZmlnRmlsZVBhdGgocHJvamVjdFJvb3QpLFxuICAgIHN0YXRpY0NvbmZpZ1BhdGg6IGdldFN0YXRpY0NvbmZpZ0ZpbGVQYXRoKHByb2plY3RSb290KSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0Q3VzdG9tQ29uZmlnRmlsZVBhdGhzKHByb2plY3RSb290OiBzdHJpbmcpOiBDb25maWdGaWxlUGF0aHMgfCBudWxsIHtcbiAgaWYgKCFjdXN0b21Db25maWdQYXRoc1twcm9qZWN0Um9vdF0pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvLyBJZiB0aGUgdXNlciBwaWNrcyBhIGN1c3RvbSBjb25maWcgcGF0aCwgd2Ugd2lsbCBvbmx5IHVzZSB0aGF0IGFuZCBza2lwIHNlYXJjaGluZyBmb3IgYSBzZWNvbmRhcnkgY29uZmlnLlxuICBpZiAoaXNEeW5hbWljRmlsZVBhdGgoY3VzdG9tQ29uZmlnUGF0aHNbcHJvamVjdFJvb3RdKSkge1xuICAgIHJldHVybiB7XG4gICAgICBkeW5hbWljQ29uZmlnUGF0aDogY3VzdG9tQ29uZmlnUGF0aHNbcHJvamVjdFJvb3RdLFxuICAgICAgc3RhdGljQ29uZmlnUGF0aDogbnVsbCxcbiAgICB9O1xuICB9XG4gIC8vIEFueXRoaW5nIHRoYXQncyBub3QganMgb3IgdHMgd2lsbCBiZSB0cmVhdGVkIGFzIGpzb24uXG4gIHJldHVybiB7IHN0YXRpY0NvbmZpZ1BhdGg6IGN1c3RvbUNvbmZpZ1BhdGhzW3Byb2plY3RSb290XSwgZHluYW1pY0NvbmZpZ1BhdGg6IG51bGwgfTtcbn1cblxuZnVuY3Rpb24gZ2V0RHluYW1pY0NvbmZpZ0ZpbGVQYXRoKHByb2plY3RSb290OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBbJ2FwcC5jb25maWcudHMnLCAnYXBwLmNvbmZpZy5qcyddKSB7XG4gICAgY29uc3QgY29uZmlnUGF0aCA9IHBhdGguam9pbihwcm9qZWN0Um9vdCwgZmlsZU5hbWUpO1xuICAgIGlmIChmcy5leGlzdHNTeW5jKGNvbmZpZ1BhdGgpKSB7XG4gICAgICByZXR1cm4gY29uZmlnUGF0aDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGdldFN0YXRpY0NvbmZpZ0ZpbGVQYXRoKHByb2plY3RSb290OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBbJ2FwcC5jb25maWcuanNvbicsICdhcHAuanNvbiddKSB7XG4gICAgY29uc3QgY29uZmlnUGF0aCA9IHBhdGguam9pbihwcm9qZWN0Um9vdCwgZmlsZU5hbWUpO1xuICAgIGlmIChmcy5leGlzdHNTeW5jKGNvbmZpZ1BhdGgpKSB7XG4gICAgICByZXR1cm4gY29uZmlnUGF0aDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8vIFRPRE86IFRoaXMgc2hvdWxkIGFjY291bnQgZm9yIGR5bmFtaWMgY29uZmlnc1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRDb25maWdGaWxlKFxuICBwcm9qZWN0Um9vdDogc3RyaW5nXG4pOiB7IGNvbmZpZ1BhdGg6IHN0cmluZzsgY29uZmlnTmFtZTogc3RyaW5nOyBjb25maWdOYW1lc3BhY2U6ICdleHBvJyB9IHtcbiAgbGV0IGNvbmZpZ1BhdGg6IHN0cmluZztcbiAgLy8gQ2hlY2sgZm9yIGEgY3VzdG9tIGNvbmZpZyBwYXRoIGZpcnN0LlxuICBpZiAoY3VzdG9tQ29uZmlnUGF0aHNbcHJvamVjdFJvb3RdKSB7XG4gICAgY29uZmlnUGF0aCA9IGN1c3RvbUNvbmZpZ1BhdGhzW3Byb2plY3RSb290XTtcbiAgICAvLyBXZSBzaG91bGRuJ3QgdmVyaWZ5IGlmIHRoZSBmaWxlIGV4aXN0cyBiZWNhdXNlXG4gICAgLy8gdGhlIHVzZXIgbWFudWFsbHkgc3BlY2lmaWVkIHRoYXQgdGhpcyBwYXRoIHNob3VsZCBiZSB1c2VkLlxuICAgIHJldHVybiB7XG4gICAgICBjb25maWdQYXRoLFxuICAgICAgY29uZmlnTmFtZTogcGF0aC5iYXNlbmFtZShjb25maWdQYXRoKSxcbiAgICAgIGNvbmZpZ05hbWVzcGFjZTogJ2V4cG8nLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gYXBwLmNvbmZpZy5qc29uIHRha2VzIGhpZ2hlciBwcmlvcml0eSBvdmVyIGFwcC5qc29uXG4gICAgY29uZmlnUGF0aCA9IHBhdGguam9pbihwcm9qZWN0Um9vdCwgJ2FwcC5jb25maWcuanNvbicpO1xuICAgIGlmICghZnMuZXhpc3RzU3luYyhjb25maWdQYXRoKSkge1xuICAgICAgY29uZmlnUGF0aCA9IHBhdGguam9pbihwcm9qZWN0Um9vdCwgJ2FwcC5qc29uJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBjb25maWdQYXRoLFxuICAgIGNvbmZpZ05hbWU6IHBhdGguYmFzZW5hbWUoY29uZmlnUGF0aCksXG4gICAgY29uZmlnTmFtZXNwYWNlOiAnZXhwbycsXG4gIH07XG59XG5cbi8vIFRPRE86IGRlcHJlY2F0ZVxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ0ZpbGVuYW1lKHByb2plY3RSb290OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gZmluZENvbmZpZ0ZpbGUocHJvamVjdFJvb3QpLmNvbmZpZ05hbWU7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkRXhwUmNBc3luYyhwcm9qZWN0Um9vdDogc3RyaW5nKTogUHJvbWlzZTxFeHBSYz4ge1xuICBjb25zdCBleHBSY1BhdGggPSBwYXRoLmpvaW4ocHJvamVjdFJvb3QsICcuZXhwcmMnKTtcbiAgcmV0dXJuIGF3YWl0IEpzb25GaWxlLnJlYWRBc3luYyhleHBSY1BhdGgsIHsganNvbjU6IHRydWUsIGNhbnRSZWFkRmlsZURlZmF1bHQ6IHt9IH0pO1xufVxuXG5jb25zdCBjdXN0b21Db25maWdQYXRoczogeyBbcHJvamVjdFJvb3Q6IHN0cmluZ106IHN0cmluZyB9ID0ge307XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldEN1c3RvbUNvbmZpZ1BhdGhzKCk6IHZvaWQge1xuICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhjdXN0b21Db25maWdQYXRocykpIHtcbiAgICBkZWxldGUgY3VzdG9tQ29uZmlnUGF0aHNba2V5XTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0Q3VzdG9tQ29uZmlnUGF0aChwcm9qZWN0Um9vdDogc3RyaW5nLCBjb25maWdQYXRoOiBzdHJpbmcpOiB2b2lkIHtcbiAgY3VzdG9tQ29uZmlnUGF0aHNbcHJvamVjdFJvb3RdID0gY29uZmlnUGF0aDtcbn1cblxuLyoqXG4gKiBBdHRlbXB0IHRvIG1vZGlmeSBhbiBFeHBvIHByb2plY3QgY29uZmlnLlxuICogVGhpcyB3aWxsIG9ubHkgZnVsbHkgd29yayBpZiB0aGUgcHJvamVjdCBpcyB1c2luZyBzdGF0aWMgY29uZmlncyBvbmx5LlxuICogT3RoZXJ3aXNlICd3YXJuJyB8ICdmYWlsJyB3aWxsIHJldHVybiB3aXRoIGEgbWVzc2FnZSBhYm91dCB3aHkgdGhlIGNvbmZpZyBjb3VsZG4ndCBiZSB1cGRhdGVkLlxuICogVGhlIHBvdGVudGlhbGx5IG1vZGlmaWVkIGNvbmZpZyBvYmplY3Qgd2lsbCBiZSByZXR1cm5lZCBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cbiAqXG4gKiBAcGFyYW0gcHJvamVjdFJvb3RcbiAqIEBwYXJhbSBtb2RpZmljYXRpb25zIG1vZGlmaWNhdGlvbnMgdG8gbWFrZSB0byBhbiBleGlzdGluZyBjb25maWdcbiAqIEBwYXJhbSByZWFkT3B0aW9ucyBvcHRpb25zIGZvciByZWFkaW5nIHRoZSBjdXJyZW50IGNvbmZpZyBmaWxlXG4gKiBAcGFyYW0gd3JpdGVPcHRpb25zIElmIHRydWUsIHRoZSBzdGF0aWMgY29uZmlnIGZpbGUgd2lsbCBub3QgYmUgcmV3cml0dGVuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtb2RpZnlDb25maWdBc3luYyhcbiAgcHJvamVjdFJvb3Q6IHN0cmluZyxcbiAgbW9kaWZpY2F0aW9uczogUGFydGlhbDxFeHBvQ29uZmlnPixcbiAgcmVhZE9wdGlvbnM6IEdldENvbmZpZ09wdGlvbnMgPSB7fSxcbiAgd3JpdGVPcHRpb25zOiBXcml0ZUNvbmZpZ09wdGlvbnMgPSB7fVxuKTogUHJvbWlzZTx7XG4gIHR5cGU6ICdzdWNjZXNzJyB8ICd3YXJuJyB8ICdmYWlsJztcbiAgbWVzc2FnZT86IHN0cmluZztcbiAgY29uZmlnOiBBcHBKU09OQ29uZmlnIHwgbnVsbDtcbn0+IHtcbiAgY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnKHByb2plY3RSb290LCByZWFkT3B0aW9ucyk7XG4gIGlmIChjb25maWcuZHluYW1pY0NvbmZpZ1BhdGgpIHtcbiAgICAvLyBXZSBjYW5ub3QgYXV0b21hdGljYWxseSB3cml0ZSB0byBhIGR5bmFtaWMgY29uZmlnLlxuICAgIC8qIEN1cnJlbnRseSB3ZSBzaG91bGQganVzdCB1c2UgdGhlIHNhZmVzdCBhcHByb2FjaCBwb3NzaWJsZSwgaW5mb3JtaW5nIHRoZSB1c2VyIHRoYXQgdGhleSdsbCBuZWVkIHRvIG1hbnVhbGx5IG1vZGlmeSB0aGVpciBkeW5hbWljIGNvbmZpZy5cblxuICAgIGlmIChjb25maWcuc3RhdGljQ29uZmlnUGF0aCkge1xuICAgICAgLy8gQm90aCBhIGR5bmFtaWMgYW5kIGEgc3RhdGljIGNvbmZpZyBleGlzdC5cbiAgICAgIGlmIChjb25maWcuZHluYW1pY0NvbmZpZ09iamVjdFR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gVGhlIGR5bmFtaWMgY29uZmlnIGV4cG9ydHMgYSBmdW5jdGlvbiwgdGhpcyBtZWFucyBpdCBwb3NzaWJseSBleHRlbmRzIHRoZSBzdGF0aWMgY29uZmlnLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRHluYW1pYyBjb25maWcgaWdub3JlcyB0aGUgc3RhdGljIGNvbmZpZywgdGhlcmUgaXNuJ3QgYSByZWFzb24gdG8gYXV0b21hdGljYWxseSB3cml0ZSB0byBpdC5cbiAgICAgICAgLy8gSW5zdGVhZCB3ZSBzaG91bGQgd2FybiB0aGUgdXNlciB0byBhZGQgdmFsdWVzIHRvIHRoZWlyIGR5bmFtaWMgY29uZmlnLlxuICAgICAgfVxuICAgIH1cbiAgICAqL1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnd2FybicsXG4gICAgICBtZXNzYWdlOiBgQ2Fubm90IGF1dG9tYXRpY2FsbHkgd3JpdGUgdG8gZHluYW1pYyBjb25maWcgYXQ6ICR7cGF0aC5yZWxhdGl2ZShcbiAgICAgICAgcHJvamVjdFJvb3QsXG4gICAgICAgIGNvbmZpZy5keW5hbWljQ29uZmlnUGF0aFxuICAgICAgKX1gLFxuICAgICAgY29uZmlnOiBudWxsLFxuICAgIH07XG4gIH0gZWxzZSBpZiAoY29uZmlnLnN0YXRpY0NvbmZpZ1BhdGgpIHtcbiAgICAvLyBTdGF0aWMgd2l0aCBubyBkeW5hbWljIGNvbmZpZywgdGhpcyBtZWFucyB3ZSBjYW4gYXBwZW5kIHRvIHRoZSBjb25maWcgYXV0b21hdGljYWxseS5cbiAgICBsZXQgb3V0cHV0Q29uZmlnOiBBcHBKU09OQ29uZmlnO1xuICAgIC8vIElmIHRoZSBjb25maWcgaGFzIGFuIGV4cG8gb2JqZWN0IChhcHAuanNvbikgdGhlbiBhcHBlbmQgdGhlIG9wdGlvbnMgdG8gdGhhdCBvYmplY3QuXG4gICAgaWYgKGNvbmZpZy5yb290Q29uZmlnLmV4cG8pIHtcbiAgICAgIG91dHB1dENvbmZpZyA9IHtcbiAgICAgICAgLi4uY29uZmlnLnJvb3RDb25maWcsXG4gICAgICAgIGV4cG86IHsgLi4uY29uZmlnLnJvb3RDb25maWcuZXhwbywgLi4ubW9kaWZpY2F0aW9ucyB9LFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT3RoZXJ3aXNlIChhcHAuY29uZmlnLmpzb24pIGp1c3QgYWRkIHRoZSBjb25maWcgbW9kaWZpY2F0aW9uIHRvIHRoZSB0b3AgbW9zdCBsZXZlbC5cbiAgICAgIG91dHB1dENvbmZpZyA9IHsgLi4uY29uZmlnLnJvb3RDb25maWcsIC4uLm1vZGlmaWNhdGlvbnMgfTtcbiAgICB9XG4gICAgaWYgKCF3cml0ZU9wdGlvbnMuZHJ5UnVuKSB7XG4gICAgICBhd2FpdCBKc29uRmlsZS53cml0ZUFzeW5jKGNvbmZpZy5zdGF0aWNDb25maWdQYXRoLCBvdXRwdXRDb25maWcsIHsganNvbjU6IGZhbHNlIH0pO1xuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiAnc3VjY2VzcycsIGNvbmZpZzogb3V0cHV0Q29uZmlnIH07XG4gIH1cblxuICByZXR1cm4geyB0eXBlOiAnZmFpbCcsIG1lc3NhZ2U6ICdObyBjb25maWcgZXhpc3RzJywgY29uZmlnOiBudWxsIH07XG59XG5cbmNvbnN0IEFQUF9KU09OX0VYQU1QTEUgPSBKU09OLnN0cmluZ2lmeSh7XG4gIGV4cG86IHtcbiAgICBuYW1lOiAnTXkgYXBwJyxcbiAgICBzbHVnOiAnbXktYXBwJyxcbiAgICBzZGtWZXJzaW9uOiAnLi4uJyxcbiAgfSxcbn0pO1xuXG5mdW5jdGlvbiBlbnN1cmVDb25maWdIYXNEZWZhdWx0VmFsdWVzKHtcbiAgcHJvamVjdFJvb3QsXG4gIGV4cCxcbiAgcGtnLFxuICBwYXRocyxcbiAgcGFja2FnZUpzb25QYXRoLFxuICBza2lwU0RLVmVyc2lvblJlcXVpcmVtZW50ID0gZmFsc2UsXG59OiB7XG4gIHByb2plY3RSb290OiBzdHJpbmc7XG4gIGV4cDogUGFydGlhbDxFeHBvQ29uZmlnPiB8IG51bGw7XG4gIHBrZzogSlNPTk9iamVjdDtcbiAgc2tpcFNES1ZlcnNpb25SZXF1aXJlbWVudD86IGJvb2xlYW47XG4gIHBhdGhzPzogQ29uZmlnRmlsZVBhdGhzO1xuICBwYWNrYWdlSnNvblBhdGg/OiBzdHJpbmc7XG59KTogeyBleHA6IEV4cG9Db25maWc7IHBrZzogUGFja2FnZUpTT05Db25maWcgfSB7XG4gIGlmICghZXhwKSB7XG4gICAgZXhwID0ge307XG4gIH1cbiAgZXhwID0gd2l0aEludGVybmFsKGV4cCBhcyBhbnksIHtcbiAgICBwcm9qZWN0Um9vdCxcbiAgICAuLi4ocGF0aHMgPz8ge30pLFxuICAgIHBhY2thZ2VKc29uUGF0aCxcbiAgfSk7XG4gIC8vIERlZmF1bHRzIGZvciBwYWNrYWdlLmpzb24gZmllbGRzXG4gIGNvbnN0IHBrZ05hbWUgPSB0eXBlb2YgcGtnLm5hbWUgPT09ICdzdHJpbmcnID8gcGtnLm5hbWUgOiBwYXRoLmJhc2VuYW1lKHByb2plY3RSb290KTtcbiAgY29uc3QgcGtnVmVyc2lvbiA9IHR5cGVvZiBwa2cudmVyc2lvbiA9PT0gJ3N0cmluZycgPyBwa2cudmVyc2lvbiA6ICcxLjAuMCc7XG5cbiAgY29uc3QgcGtnV2l0aERlZmF1bHRzID0geyAuLi5wa2csIG5hbWU6IHBrZ05hbWUsIHZlcnNpb246IHBrZ1ZlcnNpb24gfTtcblxuICAvLyBEZWZhdWx0cyBmb3IgYXBwLmpzb24vYXBwLmNvbmZpZy5qcyBmaWVsZHNcbiAgY29uc3QgbmFtZSA9IGV4cC5uYW1lID8/IHBrZ05hbWU7XG4gIGNvbnN0IHNsdWcgPSBleHAuc2x1ZyA/PyBzbHVnaWZ5KG5hbWUudG9Mb3dlckNhc2UoKSk7XG4gIGNvbnN0IHZlcnNpb24gPSBleHAudmVyc2lvbiA/PyBwa2dWZXJzaW9uO1xuICBsZXQgZGVzY3JpcHRpb24gPSBleHAuZGVzY3JpcHRpb247XG4gIGlmICghZGVzY3JpcHRpb24gJiYgdHlwZW9mIHBrZy5kZXNjcmlwdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICBkZXNjcmlwdGlvbiA9IHBrZy5kZXNjcmlwdGlvbjtcbiAgfVxuXG4gIGNvbnN0IGV4cFdpdGhEZWZhdWx0cyA9IHsgLi4uZXhwLCBuYW1lLCBzbHVnLCB2ZXJzaW9uLCBkZXNjcmlwdGlvbiB9O1xuXG4gIGxldCBzZGtWZXJzaW9uO1xuICB0cnkge1xuICAgIHNka1ZlcnNpb24gPSBnZXRFeHBvU0RLVmVyc2lvbihwcm9qZWN0Um9vdCwgZXhwV2l0aERlZmF1bHRzKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoIXNraXBTREtWZXJzaW9uUmVxdWlyZW1lbnQpIHRocm93IGVycm9yO1xuICB9XG5cbiAgbGV0IHBsYXRmb3JtcyA9IGV4cC5wbGF0Zm9ybXM7XG4gIGlmICghcGxhdGZvcm1zKSB7XG4gICAgcGxhdGZvcm1zID0gZ2V0U3VwcG9ydGVkUGxhdGZvcm1zKHByb2plY3RSb290KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZXhwOiB7IC4uLmV4cFdpdGhEZWZhdWx0cywgc2RrVmVyc2lvbiwgcGxhdGZvcm1zIH0sXG4gICAgcGtnOiBwa2dXaXRoRGVmYXVsdHMsXG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3cml0ZUNvbmZpZ0pzb25Bc3luYyhcbiAgcHJvamVjdFJvb3Q6IHN0cmluZyxcbiAgb3B0aW9uczogb2JqZWN0XG4pOiBQcm9taXNlPFByb2plY3RDb25maWc+IHtcbiAgY29uc3QgcGF0aHMgPSBnZXRDb25maWdGaWxlUGF0aHMocHJvamVjdFJvb3QpO1xuICBsZXQgeyBleHAsIHBrZywgcm9vdENvbmZpZywgZHluYW1pY0NvbmZpZ09iamVjdFR5cGUsIHN0YXRpY0NvbmZpZ1BhdGggfSA9IHJlYWRDb25maWdKc29uKFxuICAgIHByb2plY3RSb290XG4gICk7XG4gIGV4cCA9IHsgLi4ucm9vdENvbmZpZy5leHBvLCAuLi5vcHRpb25zIH07XG4gIHJvb3RDb25maWcgPSB7IC4uLnJvb3RDb25maWcsIGV4cG86IGV4cCB9O1xuXG4gIGlmIChwYXRocy5zdGF0aWNDb25maWdQYXRoKSB7XG4gICAgYXdhaXQgSnNvbkZpbGUud3JpdGVBc3luYyhwYXRocy5zdGF0aWNDb25maWdQYXRoLCByb290Q29uZmlnLCB7IGpzb241OiBmYWxzZSB9KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIHdyaXRlIHRvIGNvbmZpZzogJywgb3B0aW9ucyk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGV4cCxcbiAgICBwa2csXG4gICAgcm9vdENvbmZpZyxcbiAgICBzdGF0aWNDb25maWdQYXRoLFxuICAgIGR5bmFtaWNDb25maWdPYmplY3RUeXBlLFxuICAgIC4uLnBhdGhzLFxuICB9O1xufVxuY29uc3QgREVGQVVMVF9CVUlMRF9QQVRIID0gYHdlYi1idWlsZGA7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRXZWJPdXRwdXRQYXRoKGNvbmZpZzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9IHt9KTogc3RyaW5nIHtcbiAgaWYgKHByb2Nlc3MuZW52LldFQlBBQ0tfQlVJTERfT1VUUFVUX1BBVEgpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuV0VCUEFDS19CVUlMRF9PVVRQVVRfUEFUSDtcbiAgfVxuICBjb25zdCBleHBvID0gY29uZmlnLmV4cG8gfHwgY29uZmlnIHx8IHt9O1xuICByZXR1cm4gZXhwbz8ud2ViPy5idWlsZD8ub3V0cHV0IHx8IERFRkFVTFRfQlVJTERfUEFUSDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5hbWVGcm9tQ29uZmlnKFxuICBleHA6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuKTogeyBhcHBOYW1lPzogc3RyaW5nOyB3ZWJOYW1lPzogc3RyaW5nIH0ge1xuICAvLyBGb3IgUk4gQ0xJIHN1cHBvcnRcbiAgY29uc3QgYXBwTWFuaWZlc3QgPSBleHAuZXhwbyB8fCBleHA7XG4gIGNvbnN0IHsgd2ViID0ge30gfSA9IGFwcE1hbmlmZXN0O1xuXG4gIC8vIHJuLWNsaSBhcHBzIHVzZSBhIGRpc3BsYXlOYW1lIHZhbHVlIGFzIHdlbGwuXG4gIGNvbnN0IGFwcE5hbWUgPSBleHAuZGlzcGxheU5hbWUgfHwgYXBwTWFuaWZlc3QuZGlzcGxheU5hbWUgfHwgYXBwTWFuaWZlc3QubmFtZTtcbiAgY29uc3Qgd2ViTmFtZSA9IHdlYi5uYW1lIHx8IGFwcE5hbWU7XG5cbiAgcmV0dXJuIHtcbiAgICBhcHBOYW1lLFxuICAgIHdlYk5hbWUsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0VGFyZ2V0KHByb2plY3RSb290OiBzdHJpbmcpOiBQcm9qZWN0VGFyZ2V0IHtcbiAgY29uc3QgeyBleHAgfSA9IGdldENvbmZpZyhwcm9qZWN0Um9vdCwgeyBza2lwU0RLVmVyc2lvblJlcXVpcmVtZW50OiB0cnVlIH0pO1xuICAvLyBiZWZvcmUgU0RLIDM3LCBhbHdheXMgZGVmYXVsdCB0byBtYW5hZ2VkIHRvIHByZXNlcnZlIHByZXZpb3VzIGJlaGF2aW9yXG4gIGlmIChleHAuc2RrVmVyc2lvbiAmJiBleHAuc2RrVmVyc2lvbiAhPT0gJ1VOVkVSU0lPTkVEJyAmJiBzZW12ZXIubHQoZXhwLnNka1ZlcnNpb24sICczNy4wLjAnKSkge1xuICAgIHJldHVybiAnbWFuYWdlZCc7XG4gIH1cbiAgcmV0dXJuIGlzQmFyZVdvcmtmbG93UHJvamVjdChwcm9qZWN0Um9vdCkgPyAnYmFyZScgOiAnbWFuYWdlZCc7XG59XG5cbmZ1bmN0aW9uIGlzQmFyZVdvcmtmbG93UHJvamVjdChwcm9qZWN0Um9vdDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IFtwa2ddID0gZ2V0UGFja2FnZUpzb25BbmRQYXRoKHByb2plY3RSb290KTtcblxuICBpZiAocGtnLmRlcGVuZGVuY2llcyAmJiBwa2cuZGVwZW5kZW5jaWVzLmV4cG9raXQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCB4Y29kZXByb2pGaWxlcyA9IGdsb2JTeW5jKCdpb3MvKiovKi54Y29kZXByb2onLCB7XG4gICAgYWJzb2x1dGU6IHRydWUsXG4gICAgY3dkOiBwcm9qZWN0Um9vdCxcbiAgfSk7XG4gIGlmICh4Y29kZXByb2pGaWxlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBjb25zdCBncmFkbGVGaWxlcyA9IGdsb2JTeW5jKCdhbmRyb2lkLyoqLyouZ3JhZGxlJywge1xuICAgIGFic29sdXRlOiB0cnVlLFxuICAgIGN3ZDogcHJvamVjdFJvb3QsXG4gIH0pO1xuICBpZiAoZ3JhZGxlRmlsZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogdHJ1ZSBpZiB0aGUgZmlsZSBpcyAuanMgb3IgLnRzXG4gKlxuICogQHBhcmFtIGZpbGVQYXRoXG4gKi9cbmZ1bmN0aW9uIGlzRHluYW1pY0ZpbGVQYXRoKGZpbGVQYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuICEhZmlsZVBhdGgubWF0Y2goL1xcLltqfHRdcyQvKTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYSB1c2VmdWwgbmFtZSBkZXNjcmliaW5nIHRoZSBwcm9qZWN0IGNvbmZpZy5cbiAqIC0gZHluYW1pYzogYXBwLmNvbmZpZy5qc1xuICogLSBzdGF0aWM6IGFwcC5qc29uXG4gKiAtIGN1c3RvbSBwYXRoIGFwcCBjb25maWcgcmVsYXRpdmUgdG8gcm9vdCBmb2xkZXJcbiAqIC0gYm90aDogYXBwLmNvbmZpZy5qcyBvciBhcHAuanNvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvamVjdENvbmZpZ0Rlc2NyaXB0aW9uKHByb2plY3RSb290OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBwYXRocyA9IGdldENvbmZpZ0ZpbGVQYXRocyhwcm9qZWN0Um9vdCk7XG4gIHJldHVybiBnZXRQcm9qZWN0Q29uZmlnRGVzY3JpcHRpb25XaXRoUGF0aHMocHJvamVjdFJvb3QsIHBhdGhzKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIGRlc2NyaWJpbmcgdGhlIGNvbmZpZ3VyYXRpb25zIHVzZWQgZm9yIHRoZSBnaXZlbiBwcm9qZWN0IHJvb3QuXG4gKiBXaWxsIHJldHVybiBudWxsIGlmIG5vIGNvbmZpZyBpcyBmb3VuZC5cbiAqXG4gKiBAcGFyYW0gcHJvamVjdFJvb3RcbiAqIEBwYXJhbSBwcm9qZWN0Q29uZmlnXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9qZWN0Q29uZmlnRGVzY3JpcHRpb25XaXRoUGF0aHMoXG4gIHByb2plY3RSb290OiBzdHJpbmcsXG4gIHByb2plY3RDb25maWc6IENvbmZpZ0ZpbGVQYXRoc1xuKTogc3RyaW5nIHtcbiAgaWYgKHByb2plY3RDb25maWcuZHluYW1pY0NvbmZpZ1BhdGgpIHtcbiAgICBjb25zdCByZWxhdGl2ZUR5bmFtaWNDb25maWdQYXRoID0gcGF0aC5yZWxhdGl2ZShwcm9qZWN0Um9vdCwgcHJvamVjdENvbmZpZy5keW5hbWljQ29uZmlnUGF0aCk7XG4gICAgaWYgKHByb2plY3RDb25maWcuc3RhdGljQ29uZmlnUGF0aCkge1xuICAgICAgcmV0dXJuIGAke3JlbGF0aXZlRHluYW1pY0NvbmZpZ1BhdGh9IG9yICR7cGF0aC5yZWxhdGl2ZShcbiAgICAgICAgcHJvamVjdFJvb3QsXG4gICAgICAgIHByb2plY3RDb25maWcuc3RhdGljQ29uZmlnUGF0aFxuICAgICAgKX1gO1xuICAgIH1cbiAgICByZXR1cm4gcmVsYXRpdmVEeW5hbWljQ29uZmlnUGF0aDtcbiAgfSBlbHNlIGlmIChwcm9qZWN0Q29uZmlnLnN0YXRpY0NvbmZpZ1BhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5yZWxhdGl2ZShwcm9qZWN0Um9vdCwgcHJvamVjdENvbmZpZy5zdGF0aWNDb25maWdQYXRoKTtcbiAgfVxuICAvLyBJZiBhIGNvbmZpZyBkb2Vzbid0IGV4aXN0LCBvdXIgdG9vbGluZyB3aWxsIGdlbmVyYXRlIGEgc3RhdGljIGFwcC5qc29uXG4gIHJldHVybiAnYXBwLmpzb24nO1xufVxuXG5leHBvcnQgKiBmcm9tICcuL0NvbmZpZy50eXBlcyc7XG5cbmV4cG9ydCB7IGlzTGVnYWN5SW1wb3J0c0VuYWJsZWQgfSBmcm9tICcuL2lzTGVnYWN5SW1wb3J0c0VuYWJsZWQnO1xuIl19